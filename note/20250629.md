# 2025/06/29 Tibame èª²å ‚ç­†è¨˜ï¼šDocker èˆ‡ Linux å¯¦ä½œ

## ğŸ§  å­¸ç¿’å¿ƒæ³•

- ä¸åªæ˜¯æŠ„æŒ‡ä»¤ï¼Œè€Œæ˜¯å­¸æœƒæ€è€ƒèˆ‡æŸ¥è©¢ï¼Œå…·å‚™è§£æ±ºå•é¡Œçš„èƒ½åŠ›ã€‚
- å–„ç”¨ ChatGPTã€Googleï¼Œå„ªå…ˆç†è§£æµç¨‹ï¼Œå†å»çœ‹æ–‡ä»¶ã€‚
- æ¨è–¦å·¥å…·ï¼šVSCodeã€Docker Desktopã€Ubuntu

## ğŸ³ Docker åŸºç¤èˆ‡å¯¦ä½œ

### å•Ÿå‹• Container æŒ‡ä»¤

```bash
docker run -it --name docker-tutorial python:3.10 bash
```

- `-it`ï¼šäº’å‹•å¼çµ‚ç«¯æ©Ÿ
- `--name`ï¼šcontainer åç¨±
- `python:3.10`ï¼šimage åç¨±
- `bash`ï¼šå•Ÿå‹• bash shell

### Image æ“ä½œ

```bash
docker pull python:3.10
docker images
```

- `docker pull`ï¼šæ‹‰å– image
- `docker images`ï¼šæŸ¥çœ‹æœ¬åœ° image æ¸…å–®

## ğŸ’» Linux æŒ‡ä»¤å¯¦ä½œï¼ˆæ–¼ container å…§ï¼‰

```bash
pwd
ls -lhrt
cd /some/path
mkdir test
touch file.txt
cat file.txt
rm -rf some_folder
```

### æ¬Šé™æ“ä½œ

```bash
chmod 755 file.txt
chown user:group file.txt
```

- `-rw-r--r--` ä»£è¡¨ï¼šæ“æœ‰è€… rwï¼Œç¾¤çµ„ rï¼Œå…¶ä»–äºº r

## ğŸ“„ Dockerfile å¯¦ä½œ

### ç¯„ä¾‹

```Dockerfile
FROM python:3.10
WORKDIR /app
COPY . /app
RUN pip install flask
CMD ["python", "app.py"]
```

### å»ºç½®èˆ‡åŸ·è¡Œ

```bash
docker build -t my-web .
docker run -it -p 50000:5000 my-web
```

- `-p`ï¼šæœ¬æ©Ÿ port:container port æ˜ å°„
- å¯ç”¨ç€è¦½å™¨è¨ªå•ï¼š`http://localhost:50000`

## ğŸŒ API æ¸¬è©¦

```bash
curl http://localhost:5000
```

- æ¸¬è©¦ flask app æ˜¯å¦æ­£å¸¸å›æ‡‰
- `wget` æ˜¯ç”¨ä¾†ä¸‹è¼‰ï¼Œä¸æ˜¯æ¸¬ API

## â˜ï¸ DockerHub æ¨é€

```bash
docker tag my-web uuboy/my-web
docker login
docker push uuboy/my-web
```

## ğŸ“Œ è£œå……èªªæ˜

- mac (M1/M2) æ³¨æ„ arm64 vs x86 æ¶æ§‹
- `CMD` ç”¨æ–¼ container å•Ÿå‹•æ™‚åŸ·è¡Œï¼Œ`RUN` æ˜¯å»º image æ™‚ä½¿ç”¨
- åˆå­¸é¿å… `-d` èƒŒæ™¯åŸ·è¡Œï¼Œæ–¹ä¾¿è§€å¯Ÿ log

## ğŸ§ª å›å®¶ç·´ç¿’å»ºè­°

1. è‡ªå»ºä¸€å€‹ flask API å°ˆæ¡ˆ + Dockerfileï¼Œèƒ½åŸ·è¡Œèˆ‡å›å‚³æ–‡å­—
2. æŠŠèª²å ‚æŒ‡ä»¤æ“ä½œä¸€éï¼Œå»ºç«‹è¨˜æ†¶èˆ‡æ“ä½œæ‰‹æ„Ÿ
3. åœ¨ DockerHub æœç´¢å…¶ä»– image å˜—è©¦å•Ÿå‹•